services:
 flask_app:
  build:
   context: .
   dockerfile: dockerfile
  container_name: flask_app
  expose:
   - "5000"
  networks:
   - app-network
  restart: unless-stopped

 nginx:
  image: nginx:latest
  container_name: nginx_proxy
  ports:
   - "80:80"
   - "443:443"
  volumes:
   - ./nginx.conf:/etc/nginx/nginx.conf:ro
   # This correctly mounts your local ./certs folder
   - ./certs:/etc/nginx/certs:ro
   # This mounts your static assets
   - ./app:/app:ro
  depends_on:
   - flask_app
  networks:
   - app-network
  restart: unless-stopped

networks:
 app-network:
  driver: bridge

# No longer need the unused 'volumes:' block